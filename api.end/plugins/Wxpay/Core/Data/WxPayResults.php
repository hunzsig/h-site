<?php
namespace plugins\Wxpay\Core\Data; use plugins\Wxpay\Core\WxPayException; class WxPayResults extends WxPayDataBase { public function CheckSign() { if(!$this->IsSignSet()){ throw new WxPayException("签名错误！"); } $sign = $this->MakeSign(); if($this->GetSign() == $sign){ return true; } throw new WxPayException("签名错误！"); } public function FromArray($array) { $this->values = $array; } public static function InitFromArray($array, $noCheckSign = false) { $obj = new self(); $obj->FromArray($array); if($noCheckSign == false){ $obj->CheckSign(); } return $obj; } public function SetData($key, $value) { $this->values[$key] = $value; } public static function Init($xml, $configs) { $obj = new self(); $obj->setConfigs($configs); $obj->FromXml($xml); if($obj->values['return_code'] != 'SUCCESS'){ return $obj->GetValues(); } $obj->CheckSign(); return $obj->GetValues(); } }